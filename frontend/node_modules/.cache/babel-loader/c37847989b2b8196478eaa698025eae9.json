{"ast":null,"code":"var _jsxFileName = \"/Users/shalom/Desktop/\\u05EA\\u05D9\\u05E7\\u05D9\\u05D4 \\u05DC\\u05DC\\u05D0 \\u05E9\\u05DD 2/frontend/src/components/Router.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Login from \"./Login.js\";\nimport Register from \"./Register.js\";\nimport ProtectedRoute from \"./ProtectedRoute.js\";\nimport { Routes, Route } from 'react-router-dom';\nimport * as auth from \"../utils/auth\";\nimport { useNavigate } from 'react-router-dom';\nimport App from './App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Router = () => {\n  _s();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState(\"\");\n  const [token, setToken] = React.useState(\"\");\n  const navigate = useNavigate();\n\n  const handelLogin = newMail => {\n    setLoggedIn(true);\n    setEmail(newMail);\n    navigate(\"/\");\n  }; // const handelLogout =()=>{\n  //   setLoggedIn(false)\n  // }\n\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem('jwt');\n    console.log(jwt);\n\n    if (jwt) {\n      auth.checkToken(jwt).then(res => {\n        if (res.status === 400) {\n          console.log(\" Token not provided or provided in the wrong format \");\n        }\n\n        if (res.status === 401) {\n          console.log(\"The provided token is invalid\");\n        }\n\n        if (res) {\n          handelLogin(res.data.email);\n        }\n      }).catch(err => {\n        console.log(err);\n        localStorage.clear();\n      });\n      ;\n    }\n  };\n\n  const handelLoginSubmit = _ref => {\n    let {\n      email,\n      password\n    } = _ref;\n    auth.login(email, password).then(data => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        handelLogin(email);\n        setToken(data.token);\n      }\n\n      if (data.status === 400) {\n        console.log(\" one or more of the fields were not provided \");\n      }\n\n      if (data.status === 401) {\n        console.log(\"the user with the specified email not found \");\n      }\n    }).catch(err => console.log(err));\n  };\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/\",\n      element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n        isLoggedIn: loggedIn,\n        email: email,\n        component: App\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/signin\",\n      element: /*#__PURE__*/_jsxDEV(Login, {\n        handelLoginSubmit: handelLoginSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/signup\",\n      element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Router, \"yMp6mRhO+dTVjve+d2jlItDXKiU=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Router;\nexport default Router;\n\nvar _c;\n\n$RefreshReg$(_c, \"Router\");","map":{"version":3,"names":["React","Login","Register","ProtectedRoute","Routes","Route","auth","useNavigate","App","Router","loggedIn","setLoggedIn","useState","email","setEmail","token","setToken","navigate","handelLogin","newMail","tokenCheck","jwt","localStorage","getItem","console","log","checkToken","then","res","status","data","catch","err","clear","handelLoginSubmit","password","login","setItem","useEffect"],"sources":["/Users/shalom/Desktop/תיקיה ללא שם 2/frontend/src/components/Router.js"],"sourcesContent":["import React from 'react';\r\nimport Login from \"./Login.js\";\r\nimport Register from \"./Register.js\";\r\nimport ProtectedRoute from \"./ProtectedRoute.js\";\r\nimport {  Routes,Route } from 'react-router-dom';\r\nimport * as auth from \"../utils/auth\";\r\nimport {  useNavigate } from 'react-router-dom';\r\nimport App  from './App';\r\nconst Router = () =>{\r\nconst [loggedIn, setLoggedIn] = React.useState(false);\r\nconst [email, setEmail] = React.useState(\"\");\r\nconst [token, setToken] = React.useState(\"\");\r\nconst navigate = useNavigate();\r\n\r\nconst handelLogin =(newMail)=>{\r\n  setLoggedIn(true)\r\n  setEmail(newMail)\r\n  navigate(\"/\");\r\n}\r\n// const handelLogout =()=>{\r\n//   setLoggedIn(false)\r\n// }\r\n const tokenCheck=()=>{\r\n  const jwt = localStorage.getItem('jwt');\r\n  console.log(jwt);\r\n  if (jwt) {\r\n    auth.checkToken(jwt).then((res) => {\r\n      if(res.status === 400) {  \r\n        console.log( \" Token not provided or provided in the wrong format \")\r\n    }\r\n      if(res.status === 401) {  \r\n        console.log( \"The provided token is invalid\")\r\n    }\r\n      if (res) {\r\n        handelLogin(res.data.email);\r\n      }\r\n    }).catch(err => {\r\n      console.log(err)\r\n      localStorage.clear()\r\n    });;\r\n  }\r\n\r\n\r\n} \r\n\r\nconst handelLoginSubmit =({email,password})=>{\r\n  auth.login(email, password)\r\n            .then((data) => {\r\n\r\n                if (data.token) {\r\n                    localStorage.setItem('jwt', data.token);\r\n                    handelLogin(email)\r\n                    setToken(data.token)\r\n\r\n                }\r\n                if (data.status === 400) {\r\n                    console.log(\" one or more of the fields were not provided \")\r\n                }\r\n                if (data.status === 401) {\r\n                    console.log(\"the user with the specified email not found \")\r\n                }\r\n                \r\n               \r\n            }).catch(err => console.log(err));\r\n\r\n}\r\n\r\n\r\nReact.useEffect(() => {\r\n  tokenCheck()\r\n}, []);\r\n\r\n\r\n\r\n    return  (\r\n    <Routes>\r\n    <Route exact path=\"/\" element={<ProtectedRoute isLoggedIn={loggedIn}  email={email} component={App}/>}/>\r\n    <Route path=\"/signin\" element={<Login handelLoginSubmit={handelLoginSubmit}/>}/>\r\n      <Route path=\"/signup\" element={<Register />}/>\r\n  \r\n    </Routes>\r\n\r\n)\r\n\r\n}\r\n\r\nexport default Router\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}