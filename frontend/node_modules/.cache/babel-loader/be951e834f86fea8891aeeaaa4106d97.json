{"ast":null,"code":"import _toConsumableArray from\"/Users/shalom/Desktop/\\xA0Root project/aerond us /frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/shalom/Desktop/\\xA0Root project/aerond us /frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from\"./Header.js\";import Main from\"./Main.js\";import Footer from\"./Footer.js\";import AddPlacePopup from\"./AddPlacePopup.js\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import React from\"react\";import ImagePopup from\"./ImagePopup.js\";import api from\"../utils/api.js\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(_ref){var email=_ref.email;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isOpenEdit=_React$useState2[0],setIsOpenEdit=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isOpenAvatar=_React$useState4[0],setIsOpenAvatar=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isOpenAddcard=_React$useState6[0],setIsOpenAddcard=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isImagePopupOpen=_React$useState8[0],setIsImagePopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];function getCurrentData(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(console.log);}function setCurrentData(info){api.setUserInfoToServer(info).then(function(res){closeAllPopups();setCurrentUser(res);}).catch(console.log);}function handleUpdateAvatar(info){api.setUserPicUrl(info).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(console.log);}function handleCardDelete(card){api.deleteCardRequest(card).then(function(){setCards(cards.filter(function(c){return c._id!==card;}));}).catch(console.log);}var handleAddPlaceSubmit=function handleAddPlaceSubmit(data){api.setCardToServr(data).then(function(res){setCards([res].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(console.log);};function handleEditAvatarClick(){setIsOpenAvatar(true);}function handleEditProfileClick(){setIsOpenEdit(true);}function handleAddPlaceClick(){setIsOpenAddcard(true);}function closeAllPopups(){setIsOpenAddcard(false);setIsOpenEdit(false);setIsOpenAvatar(false);setIsImagePopupOpen(false);}var handleCardClick=function handleCardClick(cardClicked){setSelectedCard(cardClicked);setIsImagePopupOpen(true);};React.useEffect(function(){getCards();getCurrentData();},[]);React.useEffect(function(){var closeByEscape=function closeByEscape(e){if(e.key==='Escape'){closeAllPopups();}};document.addEventListener('keydown',closeByEscape);return function(){return document.removeEventListener('keydown',closeByEscape);};},[]);function getCards(){api.getCard().then(function(res){return setCards(res);}).catch(console.log);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});// Send a request to the API and getting the updated card data\napi.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(console.log);;}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{email:email}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditClick:handleEditProfileClick,onEditAvatarClick:handleEditAvatarClick,onAddClick:handleAddPlaceClick,onCardClick:handleCardClick,handleCardDelete:handleCardDelete,handleCardLike:handleCardLike}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isOpenAddcard,onClose:closeAllPopups,onUpdateNewCard:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isOpenAvatar,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isOpenEdit,onClose:closeAllPopups,onUpdateUser:setCurrentData}),/*#__PURE__*/_jsx(ImagePopup,{isOpen:isImagePopupOpen,onClose:closeAllPopups,target:selectedCard})]})})});}export default App;","map":{"version":3,"sources":["/Users/shalom/Desktop/Â Root project/aerond us /frontend/src/components/App.js"],"names":["Header","Main","Footer","AddPlacePopup","EditProfilePopup","EditAvatarPopup","React","ImagePopup","api","CurrentUserContext","App","email","useState","isOpenEdit","setIsOpenEdit","isOpenAvatar","setIsOpenAvatar","isOpenAddcard","setIsOpenAddcard","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","getCurrentData","getUserInfo","then","res","catch","console","log","setCurrentData","info","setUserInfoToServer","closeAllPopups","handleUpdateAvatar","setUserPicUrl","handleCardDelete","card","deleteCardRequest","filter","c","_id","handleAddPlaceSubmit","data","setCardToServr","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","cardClicked","useEffect","getCards","closeByEscape","e","key","document","addEventListener","removeEventListener","getCard","handleCardLike","isLiked","likes","some","i","changeLikeCardStatus","newCard","state","map"],"mappings":"wSAAA,MAAOA,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,WAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,iBAAvB,CACA,MAAOC,CAAAA,GAAP,KAAiB,iBAAjB,CACA,OAASC,kBAAT,KAAmC,gCAAnC,C,wFAGA,QAASC,CAAAA,GAAT,MAAsB,IAARC,CAAAA,KAAQ,MAARA,KAAQ,CAEpB,oBAAoCL,KAAK,CAACM,QAAN,CAAe,KAAf,CAApC,oDAAOC,UAAP,qBAAmBC,aAAnB,qBACA,qBAAwCR,KAAK,CAACM,QAAN,CAAe,KAAf,CAAxC,qDAAOG,YAAP,qBAAqBC,eAArB,qBACA,qBAA0CV,KAAK,CAACM,QAAN,CAAe,KAAf,CAA1C,qDAAOK,aAAP,qBAAsBC,gBAAtB,qBACA,qBAAgDZ,KAAK,CAACM,QAAN,CAAe,KAAf,CAAhD,qDAAOO,gBAAP,qBAAyBC,mBAAzB,qBACA,qBAAwCd,KAAK,CAACM,QAAN,CAAe,EAAf,CAAxC,sDAAOS,YAAP,sBAAqBC,eAArB,sBACA,sBAAsChB,KAAK,CAACM,QAAN,CAAe,EAAf,CAAtC,uDAAOW,WAAP,sBAAoBC,cAApB,sBACA,sBAA0BlB,KAAK,CAACM,QAAN,CAAe,EAAf,CAA1B,uDAAOa,KAAP,sBAAcC,QAAd,sBAEA,QAASC,CAAAA,cAAT,EAA0B,CACxBnB,GAAG,CAACoB,WAAJ,GAAkBC,IAAlB,CAAuB,SAACC,GAAD,CAAS,CAC5BN,cAAc,CAACM,GAAD,CAAd,CACH,CAFD,EAEGC,KAFH,CAESC,OAAO,CAACC,GAFjB,EAGD,CACD,QAASC,CAAAA,cAAT,CAAwBC,IAAxB,CAA8B,CAC5B3B,GAAG,CACA4B,mBADH,CACuBD,IADvB,EAEGN,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbO,cAAc,GACdb,cAAc,CAACM,GAAD,CAAd,CACD,CALH,EAKKC,KALL,CAKWC,OAAO,CAACC,GALnB,EAMD,CACD,QAASK,CAAAA,kBAAT,CAA4BH,IAA5B,CAAkC,CAChC3B,GAAG,CACA+B,aADH,CACiBJ,IADjB,EAEGN,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbN,cAAc,CAACM,GAAD,CAAd,CACAO,cAAc,GACf,CALH,EAKKN,KALL,CAKWC,OAAO,CAACC,GALnB,EAMD,CACD,QAASO,CAAAA,gBAAT,CAA0BC,IAA1B,CAAgC,CAC9BjC,GAAG,CAACkC,iBAAJ,CAAsBD,IAAtB,EAA4BZ,IAA5B,CAAiC,UAAM,CACrCH,QAAQ,CAACD,KAAK,CAACkB,MAAN,CAAa,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUJ,IAAjB,EAAb,CAAD,CAAR,CACD,CAFD,EAEGV,KAFH,CAESC,OAAO,CAACC,GAFjB,EAGD,CAED,GAAMa,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,IAAD,CAAU,CACrCvC,GAAG,CACAwC,cADH,CACkBD,IADlB,EAEGlB,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbJ,QAAQ,EAAEI,GAAF,4BAAUL,KAAV,GAAR,CACAY,cAAc,GACf,CALH,EAKKN,KALL,CAKWC,OAAO,CAACC,GALnB,EAMD,CAPD,CASA,QAASgB,CAAAA,qBAAT,EAAiC,CAC/BjC,eAAe,CAAC,IAAD,CAAf,CACD,CAED,QAASkC,CAAAA,sBAAT,EAAkC,CAChCpC,aAAa,CAAC,IAAD,CAAb,CACD,CAED,QAASqC,CAAAA,mBAAT,EAA+B,CAC7BjC,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAED,QAASmB,CAAAA,cAAT,EAA0B,CACxBnB,gBAAgB,CAAC,KAAD,CAAhB,CACAJ,aAAa,CAAC,KAAD,CAAb,CACAE,eAAe,CAAC,KAAD,CAAf,CACAI,mBAAmB,CAAC,KAAD,CAAnB,CACD,CAED,GAAMgC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,WAAD,CAAiB,CACvC/B,eAAe,CAAC+B,WAAD,CAAf,CACAjC,mBAAmB,CAAC,IAAD,CAAnB,CACD,CAHD,CAIAd,KAAK,CAACgD,SAAN,CAAgB,UAAM,CACpBC,QAAQ,GACR5B,cAAc,GAEf,CAJD,CAIG,EAJH,EAMArB,KAAK,CAACgD,SAAN,CAAgB,UAAM,CACpB,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3B,GAAIA,CAAC,CAACC,GAAF,GAAU,QAAd,CAAwB,CACtBrB,cAAc,GACf,CACF,CAJD,CAKAsB,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqCJ,aAArC,EACA,MAAO,kBAAMG,CAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,CAAwCL,aAAxC,CAAN,EAAP,CACH,CARC,CAQC,EARD,EAWA,QAASD,CAAAA,QAAT,EAAoB,CAClB/C,GAAG,CAACsD,OAAJ,GAAcjC,IAAd,CAAmB,SAACC,GAAD,QAASJ,CAAAA,QAAQ,CAACI,GAAD,CAAjB,EAAnB,EAA2CC,KAA3C,CAAiDC,OAAO,CAACC,GAAzD,EACD,CACD,QAAS8B,CAAAA,cAAT,CAAwBtB,IAAxB,CAA8B,CAC5B,GAAMuB,CAAAA,OAAO,CAAGvB,IAAI,CAACwB,KAAL,CAAWC,IAAX,CAAgB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACtB,GAAF,GAAUtB,WAAW,CAACsB,GAA7B,EAAhB,CAAhB,CACA;AACArC,GAAG,CAAC4D,oBAAJ,CAAyB3B,IAAI,CAACI,GAA9B,CAAmC,CAACmB,OAApC,EAA6CnC,IAA7C,CAAkD,SAACwC,OAAD,CAAa,CAC7D3C,QAAQ,CAAC,SAAC4C,KAAD,QAAWA,CAAAA,KAAK,CAACC,GAAN,CAAU,SAAC3B,CAAD,QAAQA,CAAAA,CAAC,CAACC,GAAF,GAAUJ,IAAI,CAACI,GAAf,CAAqBwB,OAArB,CAA+BzB,CAAvC,EAAV,CAAX,EAAD,CAAR,CACD,CAFD,EAEGb,KAFH,CAESC,OAAO,CAACC,GAFjB,EAEsB,CACvB,CAED,mBAGE,YAAK,SAAS,CAAC,KAAf,uBAGA,YAAK,SAAS,CAAC,MAAf,uBACI,MAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAEV,WAApC,wBACE,KAAC,MAAD,EAAS,KAAK,CAAEZ,KAAhB,EADF,cAEE,KAAC,IAAD,EACE,KAAK,CAAEc,KADT,CAEE,WAAW,CAAEyB,sBAFf,CAGE,iBAAiB,CAAED,qBAHrB,CAIE,UAAU,CAAEE,mBAJd,CAKE,WAAW,CAAEC,eALf,CAME,gBAAgB,CAAEZ,gBANpB,CAOE,cAAc,CAAEuB,cAPlB,EAFF,cAWE,KAAC,MAAD,IAXF,cAcI,KAAC,aAAD,EACE,MAAM,CAAE9C,aADV,CAEE,OAAO,CAAEoB,cAFX,CAGE,eAAe,CAAES,oBAHnB,EAdJ,cAoBI,KAAC,eAAD,EACE,MAAM,CAAE/B,YADV,CAEE,OAAO,CAAEsB,cAFX,CAGE,cAAc,CAAEC,kBAHlB,EApBJ,cA0BI,KAAC,gBAAD,EACE,MAAM,CAAEzB,UADV,CAEE,OAAO,CAAEwB,cAFX,CAGE,YAAY,CAAEH,cAHhB,EA1BJ,cA+BI,KAAC,UAAD,EACE,MAAM,CAAEf,gBADV,CAEE,OAAO,CAAEkB,cAFX,CAGE,MAAM,CAAEhB,YAHV,EA/BJ,GADJ,EAHA,EAHF,CAkDD,CAED,cAAeX,CAAAA,GAAf","sourcesContent":["import Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport AddPlacePopup from \"./AddPlacePopup.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\n\nimport React from \"react\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport api  from \"../utils/api.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\n\nfunction App({email}) {\n \n  const [isOpenEdit, setIsOpenEdit] = React.useState(false);\n  const [isOpenAvatar, setIsOpenAvatar] = React.useState(false);\n  const [isOpenAddcard, setIsOpenAddcard] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  function getCurrentData() {\n    api.getUserInfo().then((res) => {\n        setCurrentUser(res);\n    }).catch(console.log);\n  }\n  function setCurrentData(info) {\n    api\n      .setUserInfoToServer(info)\n      .then((res) => {\n        closeAllPopups()\n        setCurrentUser(res);\n      }).catch(console.log)\n  }\n  function handleUpdateAvatar(info) {\n    api\n      .setUserPicUrl(info)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups()\n      }).catch(console.log)\n  }\n  function handleCardDelete(card) {\n    api.deleteCardRequest(card).then(() => {\n      setCards(cards.filter((c) => c._id !== card));\n    }).catch(console.log);\n  }\n  \n  const handleAddPlaceSubmit = (data) => {\n    api\n      .setCardToServr(data)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups()\n      }).catch(console.log);\n  };\n\n  function handleEditAvatarClick() {\n    setIsOpenAvatar(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsOpenEdit(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsOpenAddcard(true);\n  }\n\n  function closeAllPopups() {\n    setIsOpenAddcard(false);\n    setIsOpenEdit(false);\n    setIsOpenAvatar(false);\n    setIsImagePopupOpen(false);\n  }\n\n  const handleCardClick = (cardClicked) => {\n    setSelectedCard(cardClicked);\n    setIsImagePopupOpen(true);\n  };\n  React.useEffect(() => {\n    getCards();\n    getCurrentData();\n    \n  }, []);\n  \n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keydown', closeByEscape)   \n    return () => document.removeEventListener('keydown', closeByEscape)\n}, [])\n\n\n  function getCards() {\n    api.getCard().then((res) => setCards(res)).catch(console.log);\n  }\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    // Send a request to the API and getting the updated card data\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    }).catch(console.log);;\n  }\n\n  return (\n\n   \n    <div className=\"App\">\n     \n\n    <div className=\"page\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header  email={email} />\n          <Main\n            cards={cards}\n            onEditClick={handleEditProfileClick}\n            onEditAvatarClick={handleEditAvatarClick}\n            onAddClick={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            handleCardDelete={handleCardDelete}\n            handleCardLike={handleCardLike}\n          />\n          <Footer />\n\n          \n            <AddPlacePopup\n              isOpen={isOpenAddcard}\n              onClose={closeAllPopups}\n              onUpdateNewCard={handleAddPlaceSubmit}\n            />\n\n            <EditAvatarPopup\n              isOpen={isOpenAvatar}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n            />\n\n            <EditProfilePopup\n              isOpen={isOpenEdit}\n              onClose={closeAllPopups}\n              onUpdateUser={setCurrentData}\n            />\n            <ImagePopup\n              isOpen={isImagePopupOpen}\n              onClose={closeAllPopups}\n              target={selectedCard}\n            />\n          \n        </CurrentUserContext.Provider></div> \n     \n\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}